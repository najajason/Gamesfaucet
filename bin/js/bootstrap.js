System.registerDynamic("bootstrap.js",["angular2/angular2","app.js"],!0,function(require,e,t){function n(){o.bootstrap(a.GameApp,[])}var r=this,i=r.define;r.define=void 0;var o=require("angular2/angular2"),a=require("app.js");return e.main=n,r.define=i,t.exports}),System.registerDynamic("app.js",["angular2/angular2","services/client-service.js","services/moneypot-service.js","components/top-bar.js","components/faucet.js","components/games.js","components/bets.js"],!0,function(require,e,t){var n=this,r=n.define;n.define=void 0;var i=this&&this.__decorate||function(e,t,n,r){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,r);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,r){return void(r&&r(t,n))},void 0);case 4:return e.reduceRight(function(e,r){return r&&r(t,n,e)||e},r)}},o=this&&this.__metadata||function(e,t){return"object"==typeof Reflect&&"function"==typeof Reflect.metadata?Reflect.metadata(e,t):void 0},a=require("angular2/angular2"),s=require("services/client-service.js"),c=require("services/moneypot-service.js"),u=require("components/top-bar.js"),l=require("components/faucet.js"),f=require("components/games.js"),p=require("components/bets.js"),d=function(){function e(){this.client=s.ClientService,this.loginUrl=c.MoneypotService.loginUrl,this.registerUrl=c.MoneypotService.registerUrl,this.initializeUser()}return e.prototype.initializeUser=function(){var e,t={};window.location.hash&&window.location.hash.substr(1)?(e=window.location.hash.substr(1).split("&"),e.forEach(function(e){var n=e.split("=");t[n[0]]=n[1]}),s.ClientService.createUser(t.access_token,t.expires_in),history.pushState("",document.title,window.location.pathname)):s.ClientService.loadUser()},e=i([a.Component({selector:"game-app"}),a.View({templateUrl:"/bin/views/app.html",directives:[a.NgIf,u.TopBar,l.Faucet,f.Games,p.Bets]}),o("design:paramtypes",[])],e)}();return e.GameApp=d,n.define=r,t.exports}),System.registerDynamic("services/client-service.js",["angular2/src/facade/async","model/user.js"],!0,function(require,e,t){var n=this,r=n.define;n.define=void 0;var i=require("angular2/src/facade/async"),o=require("model/user.js"),a="gf_access_token",s="gf_expires_in",c="gf_last_faucets",u="gf_client_seed",l={randomUint32:function(){if(window&&window.crypto&&window.crypto.getRandomValues&&Uint32Array){var e=new Uint32Array(1);return window.crypto.getRandomValues(e),e[0]}return Math.floor(Math.random()*Math.pow(2,32))}},f=function(){function e(){this.loading=!1,this.userLoggedEvent=new i.EventEmitter}return e.prototype.createUser=function(e,t){this.setUser(e,t),localStorage.setItem(a,e),localStorage.setItem(s,""+t)},e.prototype.loadUser=function(){var e=localStorage.getItem(a),t=localStorage.getItem(s),n=parseInt(localStorage.getItem(u),10);e&&t&&this.setUser(e,t,n)},e.prototype.updateClientSeed=function(e){e||(e=l.randomUint32()),localStorage.setItem(u,""+e),this.currentUser.clientSeed=parseInt(e,10)},e.prototype.setUser=function(e,t,n){var r=this;void 0===n&&(n=null),n||(n=l.randomUint32()),this.currentUser=new o.User(e,t,n),this.loading=!0,this.startUserListeners(),this.currentUser.loadInfo().then(function(){r.loading=!1,i.ObservableWrapper.callNext(r.userLoggedEvent,{user:r.currentUser})})["catch"](function(){r.currentUser=null,r.loading=!1})},e.prototype.startUserListeners=function(){var e=this;i.ObservableWrapper.subscribe(this.currentUser.faucetEvent,function(t){return e.onFaucetRequested(t)})},e.prototype.onFaucetRequested=function(e){e.error||localStorage.setItem(c,""+Date.now())},Object.defineProperty(e.prototype,"user",{get:function(){return this.currentUser},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lastFaucetTime",{get:function(){var e=localStorage.getItem(c);return e?Number(e):0},enumerable:!0,configurable:!0}),e}();return e.ClientService=new f,n.define=r,t.exports}),System.registerDynamic("services/moneypot-service.js",[],!0,function(require,e,t){var n=this,r=n.define;n.define=void 0;var i="514",o="https://api.moneypot.com",a=function(){function e(){}return Object.defineProperty(e.prototype,"loginUrl",{get:function(){return"https://www.moneypot.com/oauth/authorize?app_id="+i+"&response_type=token"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"registerUrl",{get:function(){return"https://www.moneypot.com/register?app_id="+i+"&response_type=token"},enumerable:!0,configurable:!0}),e.prototype.openDepositDialog=function(){var e="https://www.moneypot.com/dialog/deposit?app_id="+i,t="manage-auth",n="width=420,height=350,left=100,top=100",r=window.open(e,t,n);r.focus()},e.prototype.openWithdrawDialog=function(){var e="https://www.moneypot.com/dialog/withdraw?app_id="+i,t="manage-auth",n="width=420,height=350,left=100,top=100",r=window.open(e,t,n);r.focus()},e.prototype.getUserInfo=function(e){return fetch(o+"/v1/auth?access_token="+e)},e.prototype.getFaucet=function(e,t){return fetch(o+"/v1/claim-faucet?access_token="+e,{method:"POST",body:JSON.stringify({response:t})})},e.prototype.getHash=function(e){return fetch(o+"/v1/hashes?access_token="+e,{method:"POST"}).then(function(e){if(e.status>=400)throw new Error;return e})},e.prototype.betPlinko=function(e,t,n,r,i){return fetch(o+"/v1/bets/plinko?access_token="+i,{method:"POST",body:JSON.stringify({wager:e,pay_table:t,client_seed:n,hash:r})})},e.prototype.getBets=function(e,t,n,r,a,s){void 0===t&&(t=0),void 0===n&&(n=30),void 0===r&&(r=0),void 0===a&&(a=0),void 0===s&&(s=null);var c=o+"/v1/list-bets?access_token="+e+"&app_id="+i;return t&&(c+="&auth_id="+t),n&&(c+="&limit="+n),r&&(c+="&greater_than="+r),a&&(c+="&less_than="+a),s&&(c+="&order_by="+s),fetch(c)},e}();return e.MoneypotService=new a,n.define=r,t.exports}),System.registerDynamic("components/top-bar.js",["angular2/angular2","services/client-service.js","services/moneypot-service.js"],!0,function(require,e,t){var n=this,r=n.define;n.define=void 0;var i=this&&this.__decorate||function(e,t,n,r){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,r);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,r){return void(r&&r(t,n))},void 0);case 4:return e.reduceRight(function(e,r){return r&&r(t,n,e)||e},r)}},o=this&&this.__metadata||function(e,t){return"object"==typeof Reflect&&"function"==typeof Reflect.metadata?Reflect.metadata(e,t):void 0},a=require("angular2/angular2"),s=require("services/client-service.js"),c=require("services/moneypot-service.js"),u=function(){function e(){this.client=s.ClientService,this.loginUrl=c.MoneypotService.loginUrl,this.registerUrl=c.MoneypotService.registerUrl}return e.prototype.isLogged=function(){return!!s.ClientService.user},e.prototype.doWithdraw=function(){c.MoneypotService.openWithdrawDialog()},e.prototype.doDeposit=function(){c.MoneypotService.openDepositDialog()},e=i([a.Component({selector:"top-bar"}),a.View({templateUrl:"/bin/views/components/top-bar.html",directives:[a.NgIf]}),o("design:paramtypes",[])],e)}();return e.TopBar=u,n.define=r,t.exports}),System.registerDynamic("components/faucet.js",["angular2/angular2","services/client-service.js","components/recaptcha.js","components/count-down.js"],!0,function(require,e,t){var n=this,r=n.define;n.define=void 0;var i=this&&this.__decorate||function(e,t,n,r){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,r);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,r){return void(r&&r(t,n))},void 0);case 4:return e.reduceRight(function(e,r){return r&&r(t,n,e)||e},r)}},o=this&&this.__metadata||function(e,t){return"object"==typeof Reflect&&"function"==typeof Reflect.metadata?Reflect.metadata(e,t):void 0},a=require("angular2/angular2"),s=require("services/client-service.js"),c=require("components/recaptcha.js"),u=require("components/count-down.js"),l=3e5,f=function(){function e(){this.startFaucet()}return e.prototype.startFaucet=function(){this.nextFaucet=l-(Date.now()-s.ClientService.lastFaucetTime),this.showCaptcha=this.nextFaucet<=0,console.log("nextFaucet",this.nextFaucet),console.log("showCaptcha",this.showCaptcha)},e.prototype.onCaptchaCompleted=function(e){var t=this;s.ClientService.user.getFaucet(e).then(function(e){e.error||setTimeout(function(){return t.startFaucet()},100)})["catch"](function(e){})},e.prototype.onCountDownZero=function(){console.log("onCountDownZero"),this.nextFaucet=0,this.showCaptcha=!0},e=i([a.Component({selector:"faucet"}),a.View({templateUrl:"/bin/views/components/faucet.html",directives:[a.NgIf,c.Recaptcha,u.CountDown]}),o("design:paramtypes",[])],e)}();return e.Faucet=f,n.define=r,t.exports}),System.registerDynamic("components/games.js",["angular2/angular2","games/plinko.js"],!0,function(require,e,t){var n=this,r=n.define;n.define=void 0;var i=this&&this.__decorate||function(e,t,n,r){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,r);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,r){return void(r&&r(t,n))},void 0);case 4:return e.reduceRight(function(e,r){return r&&r(t,n,e)||e},r)}},o=this&&this.__metadata||function(e,t){return"object"==typeof Reflect&&"function"==typeof Reflect.metadata?Reflect.metadata(e,t):void 0},a=require("angular2/angular2"),s=require("games/plinko.js"),c=function(){function e(){this.games=[],this.games.push(new s.Plinko),this.currentGame=this.games[0]}return e.prototype.selectGame=function(e){this.currentGame=e},e=i([a.Component({selector:"games"}),a.View({template:"<plinko></plinko>",directives:[a.NgFor,a.NgIf,s.Plinko]}),o("design:paramtypes",[])],e)}();return e.Games=c,n.define=r,t.exports}),System.registerDynamic("components/bets.js",["angular2/angular2","components/my-bets.js","components/fair.js"],!0,function(require,e,t){var n=this,r=n.define;n.define=void 0;var i=this&&this.__decorate||function(e,t,n,r){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,r);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,r){return void(r&&r(t,n))},void 0);case 4:return e.reduceRight(function(e,r){return r&&r(t,n,e)||e},r)}},o=this&&this.__metadata||function(e,t){return"object"==typeof Reflect&&"function"==typeof Reflect.metadata?Reflect.metadata(e,t):void 0},a=require("angular2/angular2"),s=require("components/my-bets.js"),c=require("components/fair.js"),u=function(){function e(){this.tabs=[{title:"My Bets",id:"my-bets"},{title:"Fair",id:"fair"}],this.currentTab=this.tabs[0]}return e.prototype.selectTab=function(e){this.currentTab=e},e=i([a.Component({selector:"bets"}),a.View({templateUrl:"/bin/views/components/bets.html",directives:[a.NgFor,a.NgIf,s.MyBets,c.Fair]}),o("design:paramtypes",[])],e)}();return e.Bets=u,n.define=r,t.exports}),System.registerDynamic("model/user.js",["angular2/src/facade/async","services/moneypot-service.js","model/bet.js"],!0,function(require,e,t){var n=this,r=n.define;n.define=void 0;var i=require("angular2/src/facade/async"),o=require("services/moneypot-service.js"),a=require("model/bet.js"),s=function(){function e(e,t,n){this._accessToken=e,this._expiresIn=t,this._clientSeed=n,this.faucetEvent=new i.EventEmitter,this.betEvent=new i.EventEmitter}return e.prototype.loadInfo=function(){var e=this;return o.MoneypotService.getUserInfo(this._accessToken).then(function(e){return e.json()}).then(function(t){e._id=t.id,t.user&&(e._balance=t.user.balance,e._bettedCount=t.user.betted_count,e._bettedEv=t.user.betted_ev,e._bettedProfit=t.user.betted_profit,e._bettedWager=t.user.betted_wager,e._username=t.user.uname,e._unpaid=t.user.unpaid)}).then(function(){return o.MoneypotService.getHash(e._accessToken)}).then(function(e){return e.json()}).then(function(t){return e._hash=t.hash})},e.prototype.getFaucet=function(e){var t=this;return o.MoneypotService.getFaucet(this._accessToken,e).then(function(e){return e.json()}).then(function(e){return e.amount&&(t._balance+=e.amount),i.ObservableWrapper.callNext(t.faucetEvent,e),e})},e.prototype.betPlinko=function(e,t,n){var r=this;return void 0===n&&(n=!0),e>this._balance?new i.Promise(function(e,t){t()}):(this._balance-=e,o.MoneypotService.betPlinko(e,t,this._clientSeed,this._hash,this._accessToken).then(function(e){return e.json()}).then(function(t){var o=new a.Bet;return r._hash=t.next_hash,n&&(r._balance+=t.profit),o.setRaw(t),o.kind="plinko",o.username=r.username,o.wager=e,o.inProgress=!0,t.bet=o,i.ObservableWrapper.callNext(r.betEvent,{bet:o}),t}))},e.prototype.getBets=function(e,t,n,r){return void 0===e&&(e=30),void 0===t&&(t=0),void 0===n&&(n=0),void 0===r&&(r=null),o.MoneypotService.getBets(this._accessToken,this._id,e,t,n,r).then(function(e){return e.json()}).then(function(e){return e.map(function(e){var t=new a.Bet;return t.setRaw(e),t})})},e.prototype.addBalance=function(e){this._balance+=e},Object.defineProperty(e.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"balance",{get:function(){return this._balance},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"balanceInBits",{get:function(){var e=Math.round(this._balance/100*1e3)/1e3;return e+" bits"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bettedCount",{get:function(){return this._bettedCount},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bettedEv",{get:function(){return this._bettedEv},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bettedProfit",{get:function(){return this._bettedProfit},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bettedWager",{get:function(){return this._bettedWager},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"username",{get:function(){return this._username},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"unpaid",{get:function(){return this._unpaid},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"clientSeed",{get:function(){return this._clientSeed},set:function(e){this._clientSeed=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hash",{get:function(){return this._hash},enumerable:!0,configurable:!0}),e}();return e.User=s,n.define=r,t.exports}),System.registerDynamic("components/recaptcha.js",["angular2/angular2","angular2/src/facade/async"],!0,function(require,e,t){var n=this,r=n.define;n.define=void 0;var i=this&&this.__decorate||function(e,t,n,r){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,r);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,r){return void(r&&r(t,n))},void 0);case 4:return e.reduceRight(function(e,r){return r&&r(t,n,e)||e},r)}},o=this&&this.__metadata||function(e,t){return"object"==typeof Reflect&&"function"==typeof Reflect.metadata?Reflect.metadata(e,t):void 0},a=require("angular2/angular2"),s=require("angular2/src/facade/async"),c="6Le5EQsTAAAAAAlk4b-7kUdGcWleAe8U7VqYVIlT",u=function(){function e(){var e=this;this.completeHandler=new a.EventEmitter,setTimeout(function(){return e.initCaptcha()},100)}return e.prototype.initCaptcha=function(){var e=this;new s.Promise(function(e){grecaptcha.render("recaptcha",{sitekey:c,callback:e})}).then(function(t){return s.ObservableWrapper.callNext(e.completeHandler,t)})},e=i([a.Component({selector:"recaptcha",events:["completeHandler: complete"]}),a.View({template:'<div id="recaptcha"></div>'}),o("design:paramtypes",[])],e)}();return e.Recaptcha=u,n.define=r,t.exports}),System.registerDynamic("components/count-down.js",["angular2/angular2","angular2/src/facade/async"],!0,function(require,e,t){var n=this,r=n.define;n.define=void 0;var i=this&&this.__decorate||function(e,t,n,r){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,r);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,r){return void(r&&r(t,n))},void 0);case 4:return e.reduceRight(function(e,r){return r&&r(t,n,e)||e},r)}},o=this&&this.__metadata||function(e,t){return"object"==typeof Reflect&&"function"==typeof Reflect.metadata?Reflect.metadata(e,t):void 0},a=require("angular2/angular2"),s=require("angular2/src/facade/async"),c=function(){function e(){var e=this;this.secsMap=1e3,this.minsMap=60*this.secsMap,this.hoursMap=60*this.minsMap,this.zeroHandler=new a.EventEmitter,setTimeout(function(){return e.startCounter()},0)}return e.prototype.startCounter=function(){var e=this;this.endTime=Date.now()+this.milliseconds,this.interval=setInterval(function(){return e.updateCounter()},1e3)},e.prototype.updateCounter=function(){var e,t,n=Date.now(),r=this.endTime-n;return 0>=r?(clearInterval(this.interval),this.interval=null,void this.onZero()):(e=Math.floor(r%this.hoursMap/this.minsMap),t=Math.floor(r%this.minsMap/this.secsMap),void(this.counterText=e+" minutes and "+t+" seconds."))},e.prototype.onZero=function(){s.ObservableWrapper.callNext(this.zeroHandler,null)},e=i([a.Component({selector:"count-down",properties:["milliseconds: milliseconds"],events:["zeroHandler: zero"]}),a.View({template:"<span>{{ counterText }}</span>"}),o("design:paramtypes",[])],e)}();return e.CountDown=c,n.define=r,t.exports}),System.registerDynamic("games/plinko.js",["angular2/angular2","angular2/src/facade/async","services/client-service.js","model/game.js"],!0,function(require,e,t){var n=this,r=n.define;n.define=void 0;var i=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);n.prototype=t.prototype,e.prototype=new n},o=this&&this.__decorate||function(e,t,n,r){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,r);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,r){return void(r&&r(t,n))},void 0);case 4:return e.reduceRight(function(e,r){return r&&r(t,n,e)||e},r)}},a=this&&this.__metadata||function(e,t){return"object"==typeof Reflect&&"function"==typeof Reflect.metadata?Reflect.metadata(e,t):void 0},s=require("angular2/angular2"),c=require("angular2/src/facade/async"),u=require("services/client-service.js"),l=require("model/game.js").Game,f=.9,p=.77,d=760,h=500,g={requestAnimationFrame:function(e){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}(null),getProbability:function(e,t){var n=Math.pow(2,t),r=1;e=Math.min(e,t-e);for(var i=0;e>i;i++)r*=(t-i)/(i+1);return r/n},getHouseEdge:function(e){var t=e.length-1,n=0;return e.forEach(function(e,r){n+=g.getProbability(r,t)*e}),100*(1-n)},payTables:{5:{green:[2.5,.25,1.2,1.2,.25,2.5],yellow:[2.8,1.2,.7,.7,1.2,2.8],red:[5,2.16,0,0,2.16,5]},6:{green:[2.5,.25,1.1,1.1,1.1,.25,2.5],yellow:[2.8,1.8,1,.3,1,1.8,2.8],red:[5,2.2,.9,0,.9,2.2,5]},7:{green:[3,1.8,.25,1.2,1.2,.25,1.8,3],yellow:[2.8,2.15,1.5,.4,.4,1.5,2.15,2.8],red:[5.3,2.3,2,0,0,2,2.3,5.3]},8:{green:[3,1.6,.25,1.1,1.2,1.1,.25,1.6,3],yellow:[4.2,2.5,2,.7,.2,.7,2,2.5,4.2],red:[8,4,2.5,.3,0,.3,2.5,4,8]},9:{green:[3,1.4,.2,1.1,1.1,1.1,1.1,.2,1.4,3],yellow:[5,2.8,2,1.5,.2,.2,1.5,2,2.8,5],red:[12,6.2,3.3,.8,0,0,.8,3.3,6.2,12]},10:{green:[3,2,1.5,.25,1.1,1.2,1.1,.25,1.5,2,3],yellow:[6,3,2,1.8,.6,.3,.6,1.8,2,3,6],red:[12,6.2,3.3,1.5,.5,0,.5,1.5,3.3,6.2,12]},11:{green:[3,2,1.5,.2,1.1,1.1,1.1,1.1,.2,1.5,2,3],yellow:[16,5,3,1.5,1.3,.2,.2,1.3,1.5,3,5,16],red:[30,12,3,1.6,1,.2,.2,1,1.6,3,12,30]},12:{green:[3,2,1.5,1.3,.2,1.2,1.2,1.2,.2,1.3,1.5,2,3],yellow:[18,6,3,1.5,1.25,1,0,1,1.25,1.5,3,6,18],red:[50,16,4,2,1.1,.5,.3,.5,1.1,2,4,16,50]},13:{green:[3,2,1.4,1.3,.3,1.1,1.1,1.1,1.1,.3,1.3,1.4,2,3],yellow:[24,8,3,2,1.4,1.25,.3,.3,1.25,1.4,2,3,8,24],red:[90,30,5,3,1.4,1,0,0,1,1.4,3,5,30,90]},14:{green:[3,2,1.4,1.3,.25,1,1.1,1.1,1.1,1,.25,1.3,1.4,2,3],yellow:[20,6,3,1.8,1.3,1.2,1,.2,1,1.2,1.3,1.8,3,6,20],red:[100,40,8,4,2,1,.3,.2,.3,1,2,4,8,40,100]},15:{green:[3,2,1.4,1.3,1.2,.25,1.2,1.1,1.1,1.2,.25,1.2,1.3,1.4,2,3],yellow:[23,9,4,2,1.5,1.3,1.1,.5,.5,1.1,1.3,1.5,2,4,9,23],red:[100,50,9,4,3,1.4,.6,.2,.2,.6,1.4,3,4,9,50,100]},16:{green:[6,1.5,1.4,1.3,1.2,.2,1.1,1.1,1.1,1.1,1.1,.2,1.2,1.3,1.4,1.5,6],yellow:[30,10,3,2,1.5,1.2,1.1,1,.4,1,1.1,1.2,1.5,2,3,10,30],red:[125,48,13,5,3,1.4,1,.5,.3,.5,1,1.4,3,5,13,48,125]},17:{green:[4,1.6,1.5,1.4,1.3,1.2,.4,1.1,1.1,1.1,1.1,.4,1.2,1.3,1.4,1.5,1.6,4],yellow:[30,10,3,2,1.5,1.4,1.2,1.2,.5,.5,1.2,1.2,1.4,1.5,2,3,10,30],red:[130,50,13,5,3,1.4,1.3,1,.3,.3,1,1.3,1.4,3,5,13,50,130]},18:{green:[6,3,1.5,1.4,1.3,1.2,.2,1.1,1.1,1.1,1.1,1.1,.2,1.2,1.3,1.4,1.5,3,6],yellow:[50,12,4,1.6,1.5,1.4,1.2,1.1,1,.4,1,1.1,1.2,1.4,1.5,1.6,4,12,50],red:[250,60,18,5,3,1.5,1.3,1.2,.6,.4,.6,1.2,1.3,1.5,3,5,18,60,250]},19:{green:[8,4,2,1.5,1.3,1.2,1.2,.4,1.1,1.1,1.1,1.1,.4,1.2,1.2,1.3,1.5,2,4,8],yellow:[60,15,4,2,1.6,1.5,1.4,1.3,1.2,.4,.4,1.2,1.3,1.4,1.5,1.6,2,4,15,60],red:[310,80,18,5,3,1.6,1.5,1.3,1,.4,.4,1,1.3,1.5,1.6,3,5,18,80,310]},20:{green:[35,8,4,1.5,1.3,1.2,1.2,.2,1.1,1.1,1.1,1.1,1.1,.2,1.2,1.2,1.3,1.5,4,8,35],yellow:[120,25,4,2,1.6,1.5,1.4,1.3,1.1,1,.2,1,1.1,1.3,1.4,1.5,1.6,2,4,25,120],red:[600,180,25,8,3,2,1.6,1.5,1.2,.5,.4,.5,1.2,1.5,1.6,2,3,8,25,180,600]},21:{green:[60,22,8,3,2,1.5,1.4,1.3,.2,1.1,1.1,1.1,1.1,.2,1.3,1.4,1.5,2,3,8,22,60],yellow:[280,60,30,12,4,2,1.6,1.4,1.3,1.2,.2,.2,1.2,1.3,1.4,1.6,2,4,12,30,60,280],red:[2500,300,40,8,3,2,1.6,1.5,1.2,1,.4,.4,1,1.2,1.5,1.6,2,3,8,40,300,2500]},22:{green:[160,60,18,8,3,1.6,1.4,1.2,.2,1,1.1,1.1,1.1,1,.2,1.2,1.4,1.6,3,8,18,60,160],yellow:[600,120,60,15,5,2.5,1.6,1.4,1.3,1.1,.8,.2,.8,1.1,1.3,1.4,1.6,2.5,5,15,60,120,600],red:[5e3,1800,400,18,13,4,1.6,1.5,1.2,1,.5,.3,.5,1,1.2,1.5,1.6,4,13,18,400,1800,5e3]},23:{green:[420,160,32,18,6,2,1.6,1.3,1.1,.2,1.1,1.1,1.1,1.1,.2,1.1,1.3,1.6,2,6,18,32,160,420],yellow:[2200,320,120,35,12,3,2,1.5,1.4,1.3,1,.25,.25,1,1.3,1.4,1.5,2,3,12,35,120,320,2200],red:[5e4,4e3,800,38,22,6,3,2,1.2,1.1,.5,.3,.3,.5,1.1,1.2,2,3,6,22,38,800,4e3,5e4]},24:{green:[600,200,42,22,6,2,1.6,1.4,1.1,1.1,.2,1.2,1.2,1.2,.2,1.1,1.1,1.4,1.6,2,6,22,42,200,600],yellow:[4e3,600,220,50,12,3,2,1.5,1.4,1.3,1.25,.6,.2,.6,1.25,1.3,1.4,1.5,2,3,12,50,220,600,4e3],red:[75e3,6e3,900,50,25,8,3,2,1.2,1.1,1,.5,.3,.5,1,1.1,1.2,2,3,8,25,50,900,6e3,75e3]},25:{green:[1e3,500,80,25,8,3,1.6,1.3,1.2,1.2,.2,1.1,1.1,1.1,1.1,.2,1.2,1.2,1.4,1.6,3,8,25,80,500,1e3],yellow:[15e4,1200,520,150,21,3,2,1.5,1.4,1.3,1.3,1,.2,.2,1.1,1.3,1.3,1.4,1.5,2,3,21,150,520,1200,15e4],red:[1e6,1e4,1500,150,32,8,4,3,1.4,1.3,1,.5,.3,.3,.5,1,1.3,1.4,3,4,8,32,150,1500,1e4,1e6]}},getPayTable:function(e){return g.payTables[e]}},m=function(){function e(e,t,n,r){this.imageUrl="/images/chips/bitcoin-"+e+t+".png",this.size=t,this.sequence=n,this.bet=r}return e.prototype.render=function(e,t,n,r,i){var o=this;return void 0===i&&(i=1),this.endY=r,this.speed=Math.max(i,1),new c.Promise(function(r,i){o.renderResolve=r,o.renderReject=i,new fabric.Image.fromURL(o.imageUrl,function(r){o.firstStep(e,t,n,r)},{left:(e.width-o.size)/2+5,top:0})})},e.prototype.firstStep=function(e,t,n,r){var i=this;e.add(r),r.animate("top","+="+(t-this.size-1),{easing:fabric.util.ease.easeOutQuad,duration:250/this.speed,onComplete:function(){return i.move(r,n)}})},e.prototype.move=function(e,t,n){var r=this;void 0===n&&(n=0);var i;return n===this.sequence.length?void this.endEffect(e):(i="R"===this.sequence[n]?"+":"-",e.animate("left",i+"="+t.x/2,{easing:fabric.util.ease.easeOutQuad,duration:250/this.speed}),void e.animate("top","+="+t.y,{easing:fabric.util.ease.easeOutQuad,duration:250/this.speed,onComplete:function(){return r.move(e,t,n+1)}}))},e.prototype.endEffect=function(e){var t=this;e.animate("top",this.endY,{easing:fabric.util.ease.easeOutQuad,duration:250/this.speed,onComplete:function(){return t.onDropped(e)}})},e.prototype.onDropped=function(e){var t=this;e.animate("scaleX","+=1"),e.animate("scaleY","+=1"),e.animate("opacity",0,{duration:250/this.speed,onComplete:function(){t.bet.inProgress=!1,t.renderResolve()}})},e}(),y=function(e){function t(){var t=this;e.call(this,"Plinko"),this.chips=[],this.payTables=[],this.animating=!1,this.dotRadius=5,this.rowsOfPins=16,this.speed=1,this.firstRender=!0,this.sessionBets=0,this.sessionProfit=0,this.canvas=new fabric.StaticCanvas("plinko"),this.checkSize(),this.payTables=[{name:"green",table:g.getPayTable(this.rowsOfPins).green,color:"#72c02c"},{name:"yellow",table:g.getPayTable(this.rowsOfPins).yellow,color:"#f1c40f"},{name:"red",table:g.getPayTable(this.rowsOfPins).red,color:"#c0392b"}],this.canvas&&(this.renderBoard(this.rowsOfPins),this.initElements(),window.onresize=function(){return t.checkSize()})}return i(t,e),t.prototype.renderBoard=function(e){var t,n,r,i=this.canvas.height*p,o=this.canvas.width*f;this.distance={x:o/e,y:i/e},this.marginTop=Math.max(.1*this.canvas.height,50),this.firstRender=!1;for(var a=0;e>a;a++)for(var s=0;a+1>s;s++)t=s-a/2,n=this.canvas.width/2+this.distance.x*t,r=this.marginTop+a*this.distance.y,this.drawDot(n,r);this.renderPayTables(n,r)},t.prototype.drawDot=function(e,t,n,r,i){void 0===n&&(n="blue"),void 0===r&&(r=10),void 0===i&&(i="grey");var o=new fabric.Circle({radius:this.dotRadius,fill:n,left:e,top:t,stroke:i,strokeWidth:1});this.canvas.add(o),o.setShadow({color:n,blur:r})},t.prototype.renderPayTables=function(e,t){for(var n=this.canvas.height-t-this.distance.y-1,r=n/this.payTables.length,i=0;i<this.payTables.length;i++)this.renderPayoutLine(this.payTables[i].color,this.payTables[i].table,r,e,t+r*i),this.payTables[i].top=t+r*i+r},t.prototype.renderPayoutLine=function(e,t,n,r,i){var o,a,s,c=14;t.reverse();for(var u=0;u<t.length;u++)o=new fabric.Rect({left:r-u*this.distance.x+this.dotRadius,top:i+this.distance.y,fill:e,width:this.distance.x,height:n,stroke:"black",strokeWidth:1}),s=t[u]<1e3?"x"+t[u]:t[u]<1e6?t[u]/1e3+"K":t[u]/1e6+"M",a=new fabric.Text(s,{top:o.top+(n-c)/2,fill:"black",fontSize:c,textAlign:"center",fontWeight:"bold"}),a.set("left",o.left+(this.distance.x-a.width)/2),this.canvas.add(o,a);t.reverse()},t.prototype.initElements=function(){var e=this;document.getElementById("pinsSlider")&&(this.pinsSlider=new Slider("#pinsSlider",{id:"pinsSlider",min:5,max:25,step:1,value:this.rowsOfPins,formatter:function(e){return"Rows of pins: "+e}}).on("slideStop",function(t){return e.onRowsOfPinsChanged(t)})),document.getElementById("speedSlider")&&(this.speedSlider=new Slider("#speedSlider",{id:"speedSlider",min:.1,max:5,step:.1,value:this.speed,formatter:function(e){return"Speed: x"+e}}).on("slideStop",function(t){return e.speed=t}))},t.prototype.startAnimating=function(){this.animating=!0,this.pinsSlider.disable(),this.animate()},t.prototype.animate=function(){var e=this;this.canvas.renderAll(),this.chips.length?g.requestAnimationFrame(function(){return e.animate()}):(this.animating=!1,this.pinsSlider.enable())},t.prototype.bet=function(e,t){e.value<this.getMinWager()||this.doBet(e.value,t)},t.prototype.doBet=function(e,t){var n,r,i=this,o=this.payTables.find(function(e){return e.name===t}),a=100*e;return this.updateWagerStatus(e),u.ClientService.user.balance<a?new c.Promise(function(e,t){t()}):(this.loading=!0,u.ClientService.user.betPlinko(a,o.table,!1).then(function(a){return r=a,i.loading=!1,i.updateWagerStatus(e),r.outcome?(n=new m(t,28,r.outcome,r.bet),i.chips.push(n),i.animating||i.startAnimating(),n.render(i.canvas,i.marginTop,i.distance,o.top,i.speed)):void 0}).then(function(){return i.sessionBets++,i.sessionProfit+=r.profit/100,i.sessionProfit=Math.round(100*i.sessionProfit)/100,i.onChipDropped(n,a,r.profit),i.updateWagerStatus(e),r}))},t.prototype.onChipDropped=function(e,t,n){void 0===n&&(n=0),this.chips.splice(this.chips.indexOf(e),1),u.ClientService.user.addBalance(t+n)},t.prototype.onRowsOfPinsChanged=function(e){this.rowsOfPins!==e&&(this.rowsOfPins=e,this.payTables[0].table=g.getPayTable(this.rowsOfPins).green,this.payTables[1].table=g.getPayTable(this.rowsOfPins).yellow,this.payTables[2].table=g.getPayTable(this.rowsOfPins).red,this.canvas.clear(),this.renderBoard(this.rowsOfPins),this.canvas.renderAll())},t.prototype.startBetting=function(e,t,n,r,i,o,a,s,c){var u=this;void 0===c&&(c=null);var l=c||t.value,f=n.value;c||(this._autoBetting=!0),this.doBet(l,f).then(function(c){setTimeout(function(){return u._autoBetting?(c.profit>0?r.checked?l*=o.value:l=t.value:c.profit<0&&(i.checked?l*=a.value:l=t.value),e.value=l,parseFloat(l)>parseFloat(s.value)?void(u._autoBetting=!1):void u.startBetting(e,t,n,r,i,o,a,s,l)):void 0},0)})["catch"](function(){u._autoBetting=!1})},t.prototype.stopAutoBetting=function(){this._autoBetting=!1},t.prototype.checkSize=function(){var e,t,n;window.innerWidth>d&&this.canvas.width===d||window.innerWidth&&window.innerHeight&&!this.animating&&(e=this.canvas.width/this.canvas.height,t=Math.max(window.innerWidth,500),n=this.canvas.width/e,t=Math.min(t,d),n=Math.min(n,h),(t!==this.canvas.width||n!==this.canvas.height)&&(this.canvas.width=t,this.canvas.height=n,this.firstRender?(this.dotRadius=3,this.rowsOfPins=6):(this.canvas.clear(),this.renderBoard(this.rowsOfPins),this.canvas.renderAll())))},t=o([s.Component({selector:"plinko"}),s.View({templateUrl:"/bin/views/games/plinko.html",directives:[s.NgIf]}),a("design:paramtypes",[])],t)}(l);return e.Plinko=y,n.define=r,t.exports}),System.registerDynamic("components/my-bets.js",["angular2/angular2","angular2/src/facade/async","services/client-service.js"],!0,function(require,e,t){var n=this,r=n.define;n.define=void 0;var i=this&&this.__decorate||function(e,t,n,r){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,r);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,r){return void(r&&r(t,n))},void 0);case 4:return e.reduceRight(function(e,r){return r&&r(t,n,e)||e},r)}},o=this&&this.__metadata||function(e,t){return"object"==typeof Reflect&&"function"==typeof Reflect.metadata?Reflect.metadata(e,t):void 0},a=require("angular2/angular2"),s=require("angular2/src/facade/async"),c=require("services/client-service.js"),u=function(){function e(){var e=this;this.bets=[],this.loading=!0,c.ClientService.user&&c.ClientService.user.id?this.init():s.ObservableWrapper.subscribe(c.ClientService.userLoggedEvent,function(){return e.init()})}return e.prototype.init=function(){var e=this;s.ObservableWrapper.subscribe(c.ClientService.user.betEvent,function(t){return e.onBet(t)}),c.ClientService.user.getBets().then(function(t){t.forEach(function(t){e.bets.push(t)}),e.loading=!1})},e.prototype.onBet=function(e){this.bets.unshift(e.bet),this.bets.length>30&&this.bets.pop()},e=i([a.Component({selector:"my-bets"}),a.View({templateUrl:"/bin/views/components/my-bets.html",directives:[a.NgFor,a.NgIf]}),o("design:paramtypes",[])],e)}();return e.MyBets=u,n.define=r,t.exports}),System.registerDynamic("components/fair.js",["angular2/angular2","services/client-service.js"],!0,function(require,e,t){var n=this,r=n.define;n.define=void 0;var i=this&&this.__decorate||function(e,t,n,r){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,r);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,r){return void(r&&r(t,n))},void 0);case 4:return e.reduceRight(function(e,r){return r&&r(t,n,e)||e},r)}},o=this&&this.__metadata||function(e,t){return"object"==typeof Reflect&&"function"==typeof Reflect.metadata?Reflect.metadata(e,t):void 0},a=require("angular2/angular2"),s=require("services/client-service.js"),c=function(){
function e(){this.msgColor="#fff",this.user=s.ClientService.user}return e.prototype.setClientSeed=function(e){return e.value<0||e.value>4294967295?void(this.msgColor="red"):void(e.value&&(this.msgColor="#fff",s.ClientService.updateClientSeed(e.value)))},e.prototype.randomClientSeed=function(){s.ClientService.updateClientSeed(null)},e=i([a.Component({selector:"fair"}),a.View({templateUrl:"/bin/views/components/fair.html"}),o("design:paramtypes",[])],e)}();return e.Fair=c,n.define=r,t.exports}),System.registerDynamic("model/game.js",["services/client-service.js"],!0,function(require,e,t){var n=this,r=n.define;n.define=void 0;var i=require("services/client-service.js"),o=function(){function e(e){this._wager=1,this._loading=!1,this._showAutoBetting=!1,this._autoBetting=!1,this._title=e}return e.prototype.getLastWager=function(){return this.getMinWager()},e.prototype.multiplyWager=function(e,t){this._wager=e.value*t,this._wager=Math.max(this._wager,this.getMinWager()),this._wager=Math.min(this._wager,this.getMaxWager()),this._wager=Math.round(100*this._wager)/100,e.value=this._wager},e.prototype.setMinWager=function(e){this._wager=this.getMinWager(),e.value=this._wager},e.prototype.setMaxWager=function(e){this._wager=this.getMaxWager(),e.value=this._wager},e.prototype.onWagerChanged=function(e){this.updateWagerStatus(e.value)},e.prototype.updateWagerStatus=function(e){e<this.getMinWager()?this._wagerError="The minimum bet is 1 bit.":e>this.getMaxWager()?this._wagerError="Your balance is not enough for this bet.":this._wagerError=null},e.prototype.toggleAutoBetting=function(){this._showAutoBetting=!this._showAutoBetting},e.prototype.getMinWager=function(){return 1},e.prototype.getMaxWager=function(){return Math.round(i.ClientService.user.balance/100*100)/100},Object.defineProperty(e.prototype,"title",{get:function(){return this._title},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"wager",{get:function(){return this._wager},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"wagerError",{get:function(){return this._wagerError},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"loading",{get:function(){return this._loading},set:function(e){this._loading=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showAutoBetting",{get:function(){return this._showAutoBetting},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"autoBetting",{get:function(){return this._autoBetting},enumerable:!0,configurable:!0}),e}();return e.Game=o,n.define=r,t.exports}),System.registerDynamic("model/bet.js",[],!0,function(require,e,t){var n=this,r=n.define;n.define=void 0;var i=function(){function e(){}return e.prototype.setRaw=function(e){this.id=e.id,this.kind=e.kind,this.wager=e.wager,this.profit=e.profit,this.username=e.uname,this.createdAt=new Date(e.created_at),this.secret=e.secret,this.salt=e.salt},Object.defineProperty(e.prototype,"multiplier",{get:function(){return Math.round(100*(1+this.profit/this.wager))/100},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"link",{get:function(){return"https://www.moneypot.com/bets/"+this.id},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"result",{get:function(){return this.profit>0?"win":this.profit<0?"loss":"draw"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this._id},set:function(e){this._id=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"kind",{get:function(){return this._kind},set:function(e){this._kind=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"wager",{get:function(){return this._wager},set:function(e){this._wager=Math.round(e/100*1e3)/1e3},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"profit",{get:function(){return this._profit},set:function(e){this._profit=Math.round(e/100*1e3)/1e3},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"username",{get:function(){return this._username},set:function(e){this._username=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"createdAt",{get:function(){return this._createdAt},set:function(e){this._createdAt=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"secret",{get:function(){return this._secret},set:function(e){this._secret=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"salt",{get:function(){return this._salt},set:function(e){this._salt=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inProgress",{get:function(){return this._inProgress},set:function(e){this._inProgress=e},enumerable:!0,configurable:!0}),e}();return e.Bet=i,n.define=r,t.exports});